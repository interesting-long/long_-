C251 COMPILER V5.60.0,  main                                                               19/10/25  14:22:51  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE main
OBJECT MODULE PLACED IN .\out_file\main.obj
COMPILER INVOKED BY: D:\keil\C251\BIN\C251.EXE ..\user\main.c LARGE NOALIAS FLOAT64 WARNINGLEVEL(3) OPTIMIZE(3,SIZE) BRO
                    -WSE INCDIR(..\..\libraries\zf_common;..\..\libraries\zf_components;..\..\libraries\zf_device;..\..\libraries\zf_driver;.
                    -.\user;..\code) DEBUG PRINT(.\out_file\main.lst) OBJECT(.\out_file\main.obj) 

stmt  level    source

    1          #include "zf_common_headfile.h"
    2          int T=0;
    3          int delta_Speed=0;
    4          
    5          int T4=0;
    6          unsigned char speed_update_flag=0;
    7          void pit_handler1 (void);
    8          //void pit_handler2 (void);
    9          void main()
   10          {
   11   1              clock_init(SYSTEM_CLOCK_40M);                           // 务必保留
   12   1              debug_init();                                                           // 务必保留
   13   1              /****************************************************/
   14   1              init_all();
   15   1              tim1_irq_handler = pit_handler1;// 设置定时器0中断回调函数
   16   1      //      tim2_irq_handler = pit_handler2;// 设置定时器1中断回调函数
   17   1          while(1)
   18   1              {
   19   2                      
   20   2                      switch(CAR_Mode)
   21   2                      {
   22   3                              case STOP:
   23   3                              {
   24   4                                      GO_Function();
   25   4                                      if(Key)
   26   4                                      {
   27   5                                              EA=0;
   28   5                                              menu_handle_key(Key);
   29   5                                              Key=0;
   30   5                                              EA=1;
   31   5                                      }
   32   4                                      break;
   33   4                              }
   34   3                              case GO:
   35   3                              {
   36   4                                      GO_Function();
   37   4                                      if(Key)
   38   4                                      {
   39   5      //                                      EA=0;
   40   5      //                                      menu_handle_key(Key);
   41   5      //                                      Key=0;
   42   5      //                                      EA=1;
   43   5                                      }
   44   4                                      break;
   45   4                              }
   46   3                              case GO_Pararm1: 
   47   3                              {
   48   4                                      GO_Function();
   49   4                                      break;
   50   4                              }
   51   3                              case GO_Pararm2: 
   52   3                              {
   53   4                                      GO_Function();
   54   4                                      break;
   55   4                              }
   56   3                              case GO_Pararm3: 
   57   3                              {
C251 COMPILER V5.60.0,  main                                                               19/10/25  14:22:51  PAGE 2   

   58   4                                      GO_Function();
   59   4                                      break;
   60   4                              }
   61   3                              case TEST_PWM: 
   62   3                              {
   63   4                                      GO_Function();
   64   4                                      PWM_Test();
   65   4                                      break;
   66   4                              }
   67   3                              case TEST_SERVO: 
   68   3                              {
   69   4                                      GO_Function();
   70   4                                      Serve_Test();
   71   4                                      break;
   72   4                              }
   73   3                              case ADC_Show:
   74   3                              {
   75   4                                      GO_Function();
   76   4                                      break;
   77   4                              }
   78   3                              case Seta_Servo:
   79   3                              {
   80   4                                      GO_Function();
   81   4                                      Set_Sevo();
   82   4                                      break;
   83   4                              }
   84   3                      }
   85   2                      if(Protect_flag)
   86   2                      {
   87   3                              Protect_flag=0;
   88   3                              CAR_Mode=STOP;
   89   3                              Turn_mode_Init();
   90   3                      }
   91   2      
   92   2                      
   93   2         }
   94   1      }
   95          
   96          
   97          void pit_handler1(void)
   98          {
   99   1              T++;
  100   1              ADC_SampleAndFilter();//ADC采样
  101   1              dajiao=Servo_turn_pid(unification());//转向值计算
  102   1              if_Cycle();//环岛检测
  103   1              if(Servo_Flag)//舵机控制
  104   1              {
  105   2                      Servo_Control();
  106   2              }
  107   1              speed_control_ring();//读取编码器
  108   1              
  109   1              if(GO_PID_Control+GO_PID_Control1+GO_PID_Control2+GO_PID_Control3==1)//速度策略
  110   1              {
  111   2                      Speed_diff((float)(dajiao)/100,0.8);
  112   2                      if(Speed_Mode>5)
  113   2                      {
  114   3                              State_of_road();
  115   3                      }
  116   2                      else
  117   2                      {
  118   3                              Speed_Control();
  119   3                      }
  120   2              }
  121   1      //      printf("%d,%d\n",encoder_data_dir_1,(int)((ML+delta_Speed)*100));
  122   1              if(T>=4)
  123   1              {
C251 COMPILER V5.60.0,  main                                                               19/10/25  14:22:51  PAGE 3   

  124   2                      T=0;
  125   2                      Protect();
  126   2                      if(Key_Flag)//按键检测
  127   2                      {
  128   3                              Key_scaner();
  129   3                      }
  130   2                      if(ADC_Show_Flag)//ADC显示
  131   2                      {
  132   3                              Show_pararm();
  133   3                      }
  134   2              }
  135   1      }
  136          
  137          //void pit_handler2(void)
  138          //{
  139          //      
  140          //}


Module Information          Static   Overlayable
------------------------------------------------
  code size            =       383     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =         7     ------
  xdata-const size     =    ------     ------
  edata size           =    ------     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =        29     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
