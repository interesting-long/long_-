C251 COMPILER V5.60.0,  control                                                            12/09/25  16:41:15  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE control
OBJECT MODULE PLACED IN .\out_file\control.obj
COMPILER INVOKED BY: D:\keil\C251\BIN\C251.EXE ..\code\control.c LARGE NOALIAS FLOAT64 WARNINGLEVEL(3) OPTIMIZE(3,SIZE) 
                    -BROWSE INCDIR(..\..\libraries\zf_common;..\..\libraries\zf_components;..\..\libraries\zf_device;..\..\libraries\zf_drive
                    -r;..\user;..\code) DEBUG PRINT(.\out_file\control.lst) OBJECT(.\out_file\control.obj) 

stmt  level    source

    1          #include "control.h"
    2          
    3          PID servo_pid;
    4          
    5          void Ser_Servo_Duty(int value)
    6          {
    7   1          pwm_set_duty(Servo_Pwm,value);
    8   1      }
    9           /*函数：舵机的pid控制
   10           * 作用：利用电磁归一化后的信号控制舵机，
   11           * 参数1：设定的归一化目标值
   12           * 参数2：舵机最小转向值
   13           * 参数3：舵机最大转向值
   14           * 例子：Servo_turn_pid(变量,-80,80);
   15           * 将变量的值与0进行对比，输出信号控制舵机,而舵机的限幅是正负80
   16           */
   17          void Servo_turn_pid(float point,int min,int max)
   18          {
*** WARNING C57 IN LINE 18 OF ..\code\control.c: parameter 1: different from declaration
   19   1          float servo_value;
   20   1          int temp;
   21   1              if(min>max)
   22   1              {
   23   2                      temp=max;
   24   2                      max=min;
   25   2                      min=temp;
   26   2              }
   27   1          servo_value=Normal_PID(&servo_pid,point,0.0);
   28   1          temp=func_limit_ab(servo_value,min,max);
   29   1              pwm_set_duty(Servo_Pwm,Servo_Mide-temp);
   30   1      }
   31          /*
   32           * 函数功能：左路电机PWM设置
   33           * 函数名称：MotorL_SetSpeed(unsigned char);
   34           * 输入参数：想要的PWM值
   35           * 输出参数：无
   36           */
   37          void MotorL_SetSpeed(int pwm)
   38          {
   39   1          if(pwm>=0)
   40   1          {
   41   2              pwm_set_duty(MotorL_pwm1,pwm);
   42   2              pwm_set_duty(MotorL_pwm2,0);
   43   2          }
   44   1          else
   45   1          {
   46   2              pwm_set_duty(MotorL_pwm2,-pwm);
   47   2              pwm_set_duty(MotorL_pwm1,0);
   48   2          }
   49   1      }
   50          /*
   51           * 函数功能：右路电机PWM设置
   52           * 函数名称：MotorR_SetSpeed(unsigned char);
   53           * 输入参数：想要的PWM值
   54           * 输出参数：无
   55           */
   56          void MotorR_SetSpeed(int pwm)
C251 COMPILER V5.60.0,  control                                                            12/09/25  16:41:15  PAGE 2   

   57          {
   58   1          if(pwm>0)
   59   1          {
   60   2              pwm_set_duty(MotorR_pwm1,pwm);
   61   2              pwm_set_duty(MotorR_pwm2,0);
   62   2          }
   63   1          else
   64   1          {
   65   2              pwm_set_duty(MotorR_pwm2,-pwm);
   66   2              pwm_set_duty(MotorR_pwm1,0);
   67   2          }
   68   1      }
   69          /*
   70           * 函数功能：电机驱动更新
   71           * 函数名称：Motor_Update();
   72           * 输入参数：无
   73           * 输出参数：无
   74           * 可以进行拓展，写速度策略
   75           */
   76          void Motor_Update()
   77          {  
   78   1              MotorR_SetSpeed(100*MorR_Max);
   79   1              MotorL_SetSpeed(100*MorL_Max);
   80   1      }


Module Information          Static   Overlayable
------------------------------------------------
  code size            =       325     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =        44          2
  xdata-const size     =    ------     ------
  edata size           =    ------     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =    ------     ------
End of Module Information.


C251 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
